<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon">
  <link rel="icon" href="/assets/favicon.ico" type="image/x-icon">
  <link rel="canonical" href="http://localhost:1313/post/identiyEquals/">
  <link href="" rel="alternate" type="application/rss+xml" title="importre" />

  <title>Weird identiyEquals</title>
  <script src="/js/jquery.min.js"></script>
  <script src="/js/bootstrap.min.js"></script>
  <script src="/js/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/github.css">
  <link rel="stylesheet" href="/css/heobot.css">

  <meta property="og:title"             content="Weird identiyEquals"/>
  <meta property="twitter:title"        content="Weird identiyEquals">

  <meta property="og:site_name"         content="importre"/>
  <meta property="twitter:site"         content="importre">

  <meta property="og:url"               content="http://localhost:1313/post/identiyEquals/"/>

  
  <meta property="og:image"             content="/images/brand.png"/>
  <meta property="twitter:image"        content="/images/brand.png">
  

  <meta property="twitter:creator"      content="Jaewe Heo">

  
  <meta property="og:description"       content="괴상한 identiyEquals Kotlin Korea에 올라온 글을 보고 나 역시 궁금해졌다. Kotlin 문서에 따르면 val a: Int = 10000 print(a identityEquals a) 결과는 true가 나온다고 한다. 같은 곳을 바라볼테니true인게 당연하다고 생각했다. 하지만 실제로 false가 출력된다고 한다. 직접 실행해 보았는데, val a: Int = 1 // 귀찮아서 1로... print(a identityEquals a) 결과는 true. 엇, 이거 뭐지? 근데 10000을 넣으면 진짜 false가 출력된다. class identiyEquals Github에서 identityEquals 코드를 살펴보았다. 소스를 보면 OBJECT_TYPE으로 비교를 하고, 코드 생성 시 Integer.valueOf()를 통해 Boxing하는 것으로 보인다."/>
  <meta property="twitter:description"  content="괴상한 identiyEquals Kotlin Korea에 올라온 글을 보고 나 역시 궁금해졌다. Kotlin 문서에 따르면 val a: Int = 10000 print(a identityEquals a) 결과는 true가 나온다고 한다. 같은 곳을 바라볼테니true인게 당연하다고 생각했다. 하지만 실제로 false가 출력된다고 한다. 직접 실행해 보았는데, val a: Int = 1 // 귀찮아서 1로... print(a identityEquals a) 결과는 true. 엇, 이거 뭐지? 근데 10000을 넣으면 진짜 false가 출력된다. class identiyEquals Github에서 identityEquals 코드를 살펴보았다. 소스를 보면 OBJECT_TYPE으로 비교를 하고, 코드 생성 시 Integer.valueOf()를 통해 Boxing하는 것으로 보인다.">
  

</head>
<body>

  <nav class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="container-fluid">

        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">
            importre
          </a>
        </div>


        <div class="collapse navbar-collapse" id="navbar-collapse">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="/post">Archives</a></li>
            <li><a href="/about">About</a></li>
          </ul>
        </div>
      </div>
    </div>
  </nav>

  <div class="container">


<div class="page-header">
  <h1>
    Weird identiyEquals
  </h1>
</div>

<div>

  <div>
    <span class="glyphicon glyphicon-calendar" aria-hidden="true"></span>
    June 4, 2015
    &nbsp;
    <span class="glyphicon glyphicon-user" aria-hidden="true"></span>
    Jaewe Heo
  </div>

  

<h2 id="괴상한-identiyequals:7c15b1cc05420c39692226153f7a75ad">괴상한 identiyEquals</h2>

<p><a href="https://www.facebook.com/groups/kotlinkr/permalink/987350341289562/">Kotlin Korea에 올라온 글</a>을 보고 나 역시 궁금해졌다.
<a href="http://kotlinlang.org/docs/reference/basic-types.html">Kotlin 문서</a>에 따르면</p>

<pre><code class="language-kotlin">val a: Int = 10000
print(a identityEquals a)
</code></pre>

<p>결과는 <code>true</code>가 나온다고 한다.
같은 곳을 바라볼테니<code>true</code>인게 당연하다고 생각했다.</p>

<p>하지만 실제로 <code>false</code>가 출력된다고 한다.</p>

<p>직접 실행해 보았는데,</p>

<pre><code class="language-kotlin">val a: Int = 1 // 귀찮아서 1로...
print(a identityEquals a)
</code></pre>

<p>결과는 <code>true</code>.</p>

<p>엇, 이거 뭐지? 근데 <code>10000</code>을 넣으면 진짜 <code>false</code>가 출력된다.</p>

<h3 id="class-identiyequals:7c15b1cc05420c39692226153f7a75ad">class identiyEquals</h3>

<p>Github에서 <a href="https://goo.gl/XvvDuI">identityEquals 코드</a>를 살펴보았다.</p>

<p><a href="https://goo.gl/5vXKHr">소스</a>를 보면 <code>OBJECT_TYPE</code>으로 비교를 하고,
코드 생성 시 <code>Integer.valueOf()</code>를 통해 <a href="https://goo.gl/p8AKdE">Boxing</a>하는 것으로 보인다.</p>

<h3 id="java-lang-integer:7c15b1cc05420c39692226153f7a75ad">java.lang.Integer</h3>

<p>Java는</p>

<p>아래의 코드를 실행하면</p>

<pre><code class="language-java">public static void Main(String[] args) {
    final int min = -130;
    final int max = 126;
    final int size = 4;

    for (int i = 0; i &lt; size; i++) {
        Integer a = min + i;
        Integer b = min + i;
        System.out.println(a + &quot;: &quot; + (a == b));
    }

    for (int i = 0; i &lt; size; i++) {
        Integer a = max + i;
        Integer b = max + i;
        System.out.println(a + &quot;: &quot; + (a == b));
    }
}
</code></pre>

<p>결과는 아래와 같다.</p>

<pre><code>-130: false
-129: false
-128: true
-127: true
126: true
127: true
128: false
129: false
</code></pre>

<p>Java에서 Autoboxing</p>

</div>


<hr/>

<div>
  <span class="glyphicon glyphicon-list" aria-hidden="true"></span>
  &nbsp;
  
  <span class="label label-success">
    <a href="/categories/kotlin" style="color: white;">kotlin</a>
  </span>
  &nbsp;
  
</div>

<div>
  <span class="glyphicon glyphicon-tag" aria-hidden="true"></span>
  &nbsp;
  
  <span class="label label-primary">
    <a href="/tags/identiyequals" style="color: white;">identiyEquals</a>
  </span>
  &nbsp;
  
  <span class="label label-primary">
    <a href="/tags/integer" style="color: white;">Integer</a>
  </span>
  &nbsp;
  
</div>

<hr/>

</div>

<footer class="footer">
  <p>
    
    <span>
      © 2015 Jaewe Heo
    </span>
    
  </p>
</footer>


<script>document.write('<script src="http://'
        + (location.host || 'localhost').split(':')[0]
		+ ':1313/livereload.js?mindelay=10"></'
        + 'script>')</script></body>
</html>

